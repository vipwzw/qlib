# BTC/USDT 新闻情感量化因子分析需求文档

## 1. 项目背景与目标

### 1.1 项目概述
本项目旨在利用qlib量化框架，结合新闻数据，分析负面事件与正面事件对BTC/USDT价格走势的影响，构建新闻情感量化因子，验证其在加密货币交易中的有效性。

### 1.2 核心目标
- **主要目标**: 构建基于新闻情感的量化因子，评估其对BTC/USDT价格预测的有效性
- **次要目标**: 
  - 分析负面/正面新闻事件的时滞效应
  - 构建多时间维度的情感因子
  - 评估因子在不同市场环境下的表现

### 1.3 预期成果
- 可复用的新闻数据采集与处理框架
- 有效的情感量化因子模型
- 完整的因子回测与评估报告
- 可投产的量化交易策略

## 2. 数据需求分析

### 2.1 价格数据
- **数据源**: Binance API
- **交易对**: BTC/USDT
- **频率**: 1分钟级别 (1m)
- **数据字段**: 开盘价、最高价、最低价、收盘价、成交量
- **数据范围**: 最近2年数据（可根据需要调整）
- **数据格式**: qlib标准格式

### 2.2 新闻数据
- **数据源**: 
  - 主要: CoinDesk, CoinTelegraph, Bitcoin Magazine
  - 次要: Twitter API (针对关键KOL)、Reddit (r/Bitcoin)
  - 补充: 新闻聚合API (NewsAPI, Alpha Vantage News)
- **采集内容**:
  - 新闻标题和正文
  - 发布时间 (精确到分钟)
  - 新闻来源
  - 社交媒体提及量
- **关键词**: Bitcoin, BTC, cryptocurrency, regulation, adoption, mining, market crash, bull run等
- **语言**: 英文为主

### 2.3 标注数据
- **情感标签**: 正面(1)、中性(0)、负面(-1)
- **事件类型**: 监管、技术、市场、宏观经济等
- **影响强度**: 1-5级别评分

## 3. 技术架构设计

### 3.1 整体架构
```
数据层 -> 处理层 -> 因子层 -> 模型层 -> 策略层
```

### 3.2 关键组件

#### 3.2.1 数据采集模块
- **价格数据采集器**: 基于qlib crypto collector扩展
- **新闻数据爬虫**: 多源新闻采集，支持增量更新
- **数据存储**: qlib格式 + 原始数据备份

#### 3.2.2 新闻处理模块
- **文本预处理**: 清洗、去重、标准化
- **情感分析引擎**: 
  - 基础模型: VADER, TextBlob
  - 进阶模型: FinBERT, CryptoBERT
  - 自定义微调模型
- **事件识别**: 关键事件自动标记

#### 3.2.3 因子构建模块
- **基础情感因子**: 
  - 实时情感得分
  - 情感变化率
  - 情感波动率
- **高级组合因子**:
  - 多时间周期聚合
  - 来源权重加权
  - 事件类型区分

#### 3.2.4 因子评估模块
- **有效性检验**: IC分析、信息比率
- **稳定性测试**: 时间序列稳定性
- **相关性分析**: 与传统技术因子的关系

## 4. 核心功能模块

### 4.1 数据采集与预处理

#### 4.1.1 价格数据模块
```python
# 核心功能
- BTC/USDT 1分钟数据采集
- 数据质量检查与清洗
- qlib格式转换与存储
- 实时数据更新机制
```

#### 4.1.2 新闻数据模块
```python
# 核心功能
- 多源新闻爬取 (RSS, API, 网页)
- 去重与质量过滤
- 时间戳标准化
- 增量数据更新
```

### 4.2 情感分析与因子构建

#### 4.2.1 情感分析引擎
```python
# 层次化情感分析
Level 1: 词典法 (VADER)
Level 2: 机器学习 (FinBERT)
Level 3: 自定义微调模型

# 输出指标
- 情感得分 (-1 到 1)
- 置信度分数
- 情感分类 (正面/中性/负面)
```

#### 4.2.2 因子工程
```python
# 基础因子
news_sentiment_1m     # 1分钟情感得分
news_sentiment_5m     # 5分钟聚合
news_sentiment_15m    # 15分钟聚合
news_sentiment_1h     # 1小时聚合

# 衍生因子
sentiment_change_rate # 情感变化率
sentiment_volatility  # 情感波动率
news_volume          # 新闻发布量
weighted_sentiment   # 来源权重加权情感

# 复合因子
momentum_sentiment   # 动量-情感复合
volume_sentiment     # 成交量-情感复合
```

### 4.3 因子评估与验证

#### 4.3.1 单因子分析
```python
# 评估指标
- IC (Information Coefficient)
- Rank IC
- IC_IR (Information Ratio)
- 因子收益率
- 最大回撤
- 夏普比率
```

#### 4.3.2 多因子分析
```python
# 分析维度
- 因子相关性矩阵
- 因子贡献度分解
- 因子稳定性测试
- 因子衰减分析
```

### 4.4 策略回测与评估

#### 4.4.1 回测框架
```python
# 基于qlib backtest
- 支持分钟级回测
- 考虑交易成本
- 滑点模型
- 风险控制
```

#### 4.4.2 策略类型
```python
# 策略设计
1. 纯情感策略: 基于新闻情感信号
2. 技术+情感策略: 结合技术指标
3. 多因子策略: 情感因子权重优化
```

## 5. 实施计划与里程碑

### 5.1 第一阶段: 数据基础建设 (2-3周)

#### Week 1: 基础数据采集
- [ ] 搭建BTC/USDT价格数据采集系统
- [ ] 配置qlib环境，适配加密货币数据
- [ ] 建立新闻源清单，开发基础爬虫
- [ ] 数据存储架构设计

#### Week 2: 新闻数据处理
- [ ] 完善多源新闻采集器
- [ ] 实现数据去重与清洗
- [ ] 建立新闻-时间对齐机制
- [ ] 初步数据质量评估

#### Week 3: 数据整合
- [ ] 价格与新闻数据对齐
- [ ] 建立统一数据访问接口
- [ ] 数据质量监控机制
- [ ] 历史数据回补

### 5.2 第二阶段: 情感分析引擎 (2-3周)

#### Week 4: 基础情感分析
- [ ] 集成VADER情感分析器
- [ ] 部署FinBERT模型
- [ ] 建立情感标注样本集
- [ ] 初步情感分析效果评估

#### Week 5: 模型优化
- [ ] 自定义词典构建
- [ ] 模型微调与优化
- [ ] 多模型集成策略
- [ ] 情感分析准确率提升

#### Week 6: 因子构建
- [ ] 基础情感因子计算
- [ ] 多时间维度聚合
- [ ] 权重与归一化处理
- [ ] 因子存储与管理

### 5.3 第三阶段: 因子验证与策略开发 (3-4周)

#### Week 7-8: 因子分析
- [ ] 单因子有效性检验
- [ ] 因子稳定性测试
- [ ] 与传统因子相关性分析
- [ ] 因子优化与筛选

#### Week 9-10: 策略开发
- [ ] 基础情感策略开发
- [ ] 多因子组合策略
- [ ] 风险控制机制
- [ ] 策略参数优化

### 5.4 第四阶段: 系统集成与优化 (1-2周)

#### Week 11: 系统集成
- [ ] 完整流程测试
- [ ] 性能优化
- [ ] 异常处理机制
- [ ] 监控与告警

#### Week 12: 文档与交付
- [ ] 完整文档编写
- [ ] 代码注释与规范
- [ ] 部署指南
- [ ] 培训材料准备

## 6. 技术栈与工具

### 6.1 核心框架
- **量化框架**: qlib
- **数据处理**: pandas, numpy
- **机器学习**: scikit-learn, transformers
- **深度学习**: torch/tensorflow
- **文本处理**: nltk, spacy

### 6.2 数据存储
- **时序数据**: qlib格式 + ClickHouse (可选)
- **新闻数据**: MongoDB / PostgreSQL
- **缓存**: Redis
- **文件存储**: 本地 / OSS

### 6.3 开发工具
- **开发环境**: Python 3.8+
- **版本控制**: Git
- **项目管理**: requirements.txt / poetry
- **可视化**: matplotlib, plotly
- **监控**: logging + 自定义监控

## 7. 风险评估与应对

### 7.1 技术风险
- **数据质量风险**: 多源验证、异常检测
- **模型漂移风险**: 定期重训练、A/B测试
- **系统性能风险**: 分布式架构、缓存优化

### 7.2 数据风险
- **数据源中断**: 多备份源、容错机制
- **数据偏差**: 样本平衡、交叉验证
- **标注质量**: 多人标注、一致性检查

### 7.3 业务风险
- **因子失效**: 动态监控、及时调整
- **过拟合风险**: 交叉验证、样本外测试
- **市场环境变化**: 自适应机制

## 8. 成功标准与KPI

### 8.1 技术指标
- **数据覆盖率**: >95%
- **情感分析准确率**: >75%
- **因子IC**: >0.05 (月度)
- **系统可用性**: >99%

### 8.2 业务指标
- **策略年化收益**: >市场基准
- **最大回撤**: <20%
- **夏普比率**: >1.5
- **因子持续有效期**: >6个月

### 8.3 交付物
- [ ] 完整的数据采集与处理系统
- [ ] 新闻情感分析引擎
- [ ] 量化因子库
- [ ] 策略回测系统
- [ ] 技术文档与用户手册
- [ ] 部署与运维指南

## 9. 预算与资源

### 9.1 人力资源
- **项目经理**: 1人，全程参与
- **数据工程师**: 1人，负责数据采集与处理
- **算法工程师**: 1人，负责模型开发
- **测试工程师**: 0.5人，负责系统测试

### 9.2 硬件资源
- **开发服务器**: 8核CPU, 32GB内存, 1TB SSD
- **GPU资源**: 用于深度学习模型训练 (可选云服务)
- **存储空间**: 2TB (数据存储)
- **网络带宽**: 稳定的网络连接

### 9.3 第三方服务
- **数据API**: NewsAPI, Twitter API等
- **云计算**: AWS/阿里云 (可选)
- **模型服务**: HuggingFace Hub
- **监控服务**: 日志分析与监控

## 10. 后续优化方向

### 10.1 技术优化
- 实时流处理架构
- 图神经网络应用
- 强化学习策略优化
- 多币种扩展

### 10.2 数据扩展
- 期权数据整合
- 链上数据分析
- 宏观经济数据
- 另类数据源

### 10.3 模型进化
- 多模态融合
- 因果推理
- 动态因子调整
- 个性化策略

---

**项目负责人**: [待定]  
**创建日期**: 2024年1月  
**最后更新**: 2024年1月  
**文档版本**: v1.0  

**联系方式**: [项目邮箱]  
**项目仓库**: [Git仓库地址] 